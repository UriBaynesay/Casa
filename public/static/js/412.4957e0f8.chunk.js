"use strict";(self.webpackChunkcasa=self.webpackChunkcasa||[]).push([[412],{4872:function(e,t,s){s(2791);t.Z=s.p+"static/media/star.523d9e205c20990b0c1b62dddc8cee4b.svg"},3553:function(e,t,s){s.d(t,{G:function(){return a}});var n=s(3504),r=s(184),a=function(e){var t=e.stay;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:"short-info-container",children:[(0,r.jsxs)("div",{className:"txt-info",children:[(0,r.jsxs)("h2",{children:[t.roomType," hosted by ",t.host.fullname]}),(0,r.jsxs)("h4",{children:[" ",t.capacity," guests \xb7 ",t.bedrooms," bedrooms \xb7 ",t.beds," ","beds \xb7 ",t.bathrooms," baths"]})]}),(0,r.jsxs)(n.rU,{to:"/user/profile/".concat(t.host._id),children:[" ",(0,r.jsx)("div",{className:"host-img-container",children:(0,r.jsx)("img",{src:t.host.thumbnailUrl,alt:"",loading:"lazy"})})]})]}),(0,r.jsx)("section",{className:"summary",children:(0,r.jsx)("p",{children:t.summary})})]})}},9210:function(e,t,s){s.d(t,{x:function(){return i}});var n=s(3504),r=s(184),a=function(e){var t=e.review,s=e.isReviewsExpanded;return(0,r.jsxs)("article",{className:"review-card",children:[(0,r.jsx)(n.rU,{to:"/user/profile/".concat(t.by._id),children:(0,r.jsxs)("div",{className:"writer-info-container",children:[(0,r.jsx)("div",{className:"writer-img-container",children:(0,r.jsx)("img",{src:t.by.imgUrl,alt:"",loading:"lazy"})}),(0,r.jsx)("h4",{children:t.by.fullname})]})}),(0,r.jsx)("p",{style:s?{height:"fit-content"}:{height:"72px"},children:t.txt})]})},i=function(e){var t=e.isReviewsExpanded,s=e.reviews;return(0,r.jsx)("div",{className:"review-cards-container",style:t?{maxHeight:"fit-content"}:null,children:s.map((function(e){return(0,r.jsx)(a,{isReviewsExpanded:t,review:e},e.by._id)}))})}},6390:function(e,t,s){s.d(t,{X:function(){return c}});var n=s(4165),r=s(5861),a=s(7265),i="order",c={query:function(e){return o.apply(this,arguments)},saveOrder:function(e){return u.apply(this,arguments)},getById:function(e){return l.apply(this,arguments)},remove:function(e){return d.apply(this,arguments)},getUserOrdersStats:function(e){var t={};return e?(t.avgRating=h(e),t.totalRevenue=m(e),t.ordersStatus=x(e),t):{avgRating:0,totalRevenue:0,ordersStatus:{total:0,pending:0,accepted:0,declined:0}}}};function o(){return(o=(0,r.Z)((0,n.Z)().mark((function e(t){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.R.get(i,t);case 3:return s=e.sent,e.abrupt("return",s);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.data;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function l(){return(l=(0,r.Z)((0,n.Z)().mark((function e(t){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.R.get("".concat(i,"/").concat(t));case 3:return s=e.sent,e.abrupt("return",s);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.data;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function d(){return(d=(0,r.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.R.delete("".concat(i,"/").concat(t));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0.data;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function u(){return(u=(0,r.Z)((0,n.Z)().mark((function e(t){var s,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._id){e.next=11;break}return e.prev=1,e.next=4,a.R.post(i,t);case 4:return s=e.sent,e.abrupt("return",s);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0.data;case 11:return e.prev=11,e.next=14,a.R.put("".concat(i,"/").concat(t._id),t);case 14:return r=e.sent,e.abrupt("return",r);case 18:throw e.prev=18,e.t1=e.catch(11),e.t1.data;case 21:case"end":return e.stop()}}),e,null,[[1,8],[11,18]])})))).apply(this,arguments)}function h(e){return e.reduce((function(e,t){return e+t.stay.reviewScores.rating}),0)/e.length}function m(e){return e.reduce((function(e,t){return"accepted"===t.status?e+t.price:e}),0)}function x(e){return e.reduce((function(e,t){return e.total++,"pending"===t.status?e.pending++:"accepted"===t.status?e.accepted++:"declined"===t.status&&e.declined++,e}),{total:0,pending:0,accepted:0,declined:0})}},6221:function(e,t,s){s.r(t),s.d(t,{default:function(){return G}});var n=s(2982),r=s(1413),a=s(4165),i=s(5861),c=s(885),o=s(2791),l=s(6871),d=s(9434),u=s(8312),h=s(8820),m=s(3853),x=s(6355),v=s(6856),p=s(5880),j=s(184),f=function(e){var t=e.iconType,s=e.stayHas,n={TV:(0,j.jsx)(m.hRw,{}),Wifi:(0,j.jsx)(h.w$G,{}),Kitchen:(0,j.jsx)(v.O28,{}),Washer:(0,j.jsx)(p.PTf,{}),Beachfront:(0,j.jsx)(v.sWy,{}),Dryer:(0,j.jsx)(v.zAs,{}),"Air conditioning":(0,j.jsx)(x._aA,{}),Elevator:(0,j.jsx)(v.DzZ,{}),"Luggage dropoff allowed":(0,j.jsx)(v.Lab,{}),Pool:(0,j.jsx)(x.ein,{}),Iron:(0,j.jsx)(v.ppW,{})};return n[t]?(0,j.jsx)("div",{className:"amenity-icon-container",children:s?(0,j.jsxs)(o.Fragment,{children:[(0,j.jsx)(h.YV5,{})," ",(0,j.jsx)("span",{className:"amenity-txt",children:t})]}):(0,j.jsxs)(o.Fragment,{children:[n[t]," ",(0,j.jsx)("span",{className:"amenity-txt",children:t})]})}):(0,j.jsx)(j.Fragment,{})},g=s(3553),w=function(e){var t=e.stay,s=(0,o.useState)(!1),n=(0,c.Z)(s,2),r=n[0],a=n[1];if(!t)return(0,j.jsx)("section",{className:"stay-main-info-container"});var i=u.N.getAmenities();return(0,j.jsxs)("section",{className:"stay-main-info-container",children:[(0,j.jsx)(g.G,{stay:t}),(0,j.jsxs)("section",{className:"amenities-container",children:[(0,j.jsx)("h2",{children:"What this place offers"}),(0,j.jsx)("div",{className:"amenities",style:r?{maxHeight:"fit-content"}:null,children:i.map((function(e,s){return(0,j.jsx)(f,{iconType:e,stayHas:t.amenities.find((function(t){return t===e}))},s)}))}),(0,j.jsx)("div",{className:"amenities-btn",onClick:function(){a(!r)},children:(0,j.jsx)("h3",{children:r?"Show less":"Show more"})})]})]})},y=s(6390),N=s(1306),S=s(7649),b=s(5524),Z=function(e){var t=e.dates,s=e.isDateModalOpen,n=e.onSetDates;return(0,j.jsxs)(o.Fragment,{children:[(0,j.jsx)("h3",{className:"start-date",children:t?new Date(t.startDateStamp).toLocaleDateString():"Check in"}),(0,j.jsx)("h3",{className:"end-date",children:t?new Date(t.endDateStamp).toLocaleDateString():"Check out"}),(0,j.jsx)("div",{className:"modal-container",onClick:function(e){return e.stopPropagation()},children:s&&(0,j.jsx)(b.q,{onSetDates:n})})]})},k=function(e){var t=e.txt,s=e.cb;return(0,o.useEffect)((function(){var e=document.querySelector(".mouse-cursor-gradient-tracking"),t=function(t){var s=t.target.getBoundingClientRect(),n=t.clientX-s.left,r=t.clientY-s.top;e.style.setProperty("--x",n+"px"),e.style.setProperty("--y",r+"px")};return e.addEventListener("mousemove",t),function(){e.removeEventListener("mousemove",t)}}),[]),(0,j.jsx)("h3",{className:"reserve-btn mouse-cursor-gradient-tracking",onClick:s,children:t})},D=s(4872),C=function(e){var t=e.stayId,s=e.hostId,n=e.price,r=e.rating,l=e.reviewsLength,u=e.numOfGuest,h=(0,o.useState)(0),m=(0,c.Z)(h,2),x=m[0],v=m[1],p=(0,o.useState)(null),f=(0,c.Z)(p,2),g=f[0],w=f[1],b=(0,o.useState)(!1),C=(0,c.Z)(b,2),R=C[0],I=C[1],U=(0,o.useState)(!1),F=(0,c.Z)(U,2),O=F[0],z=F[1],L=(0,d.v9)((function(e){return e.userModule})).user,A=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L){e.next=3;break}return(0,N.h4)("Please login"),e.abrupt("return");case 3:if(g&&g.endDateStamp&&g.startDateStamp){e.next=7;break}return(0,N.h4)("Please select dates"),I(!0),e.abrupt("return");case 7:if(0!==x){e.next=11;break}return(0,N.h4)("Please select the number of people visiting"),z(!0),e.abrupt("return");case 11:return e.prev=11,e.next=14,y.X.saveOrder({price:(g.endDateStamp-g.startDateStamp)/864e5*n,hostId:s,stayId:t,guestCount:x,startDate:g.startDateStamp,endDate:g.endDateStamp});case 14:(0,N.h4)("Order sent"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),"not availble"===e.t0?(0,N.h4)("Sorry not availble in those dates"):(0,N.h4)("Failed to save your order please try again later");case 20:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(){return e.apply(this,arguments)}}();return(0,j.jsx)("section",{className:"reserve-container",children:(0,j.jsxs)("div",{className:"reserve-modal",children:[(0,j.jsxs)("div",{className:"top-info",children:[(0,j.jsxs)("h1",{children:["$",n.toLocaleString()," ",(0,j.jsx)("span",{className:"night-container",children:"night"})]}),(0,j.jsxs)("div",{className:"stats",children:[(0,j.jsxs)("span",{children:[(0,j.jsx)("img",{width:"14px",src:D.Z,alt:"",loading:"lazy"})," ",5*(r/100).toFixed(1)," \xb7"]}),(0,j.jsxs)("span",{className:"reviews",children:[" ",l," reviews"]})]})]}),(0,j.jsxs)("div",{className:"order-datepicker-guest ".concat(R||O?"active":""),children:[(0,j.jsx)("div",{className:"date-picker-modal",onClick:function(){return I(!R)},children:(0,j.jsx)(Z,{dates:g,isDateModalOpen:R,onSetDates:function(e,t){var s=new Date(e),n=new Date(t);if(s.getDate()!==n.getDate()){var r=s.getTime(),a=n.getTime();w({endDateStamp:a,startDateStamp:r}),I(!1)}}})}),(0,j.jsx)("h3",{className:"guests-title",onClick:function(){z(!O)},children:x?x+" guests":"Guests"}),O&&(0,j.jsx)(S.C,{setGuests:v,maxGuests:u,onCloseModal:function(){z(!1)}})]}),(0,j.jsx)(k,{txt:"Reserve",cb:A}),(0,j.jsx)("h4",{children:"You won't be charged yet."}),(0,j.jsxs)("div",{className:"total-container",children:[(0,j.jsx)("h3",{children:"Total"}),(0,j.jsxs)("h3",{children:["$",null!==g?((g.endDateStamp-g.startDateStamp)/864e5*n).toLocaleString():"0"]})]})]})})},R=function(e){var t=e.reviewScores,s=e.reviews;return(0,j.jsxs)("div",{className:"reviews-score",children:[(0,j.jsxs)("h1",{children:[(0,j.jsx)("img",{width:"14px",src:D.Z,alt:"",loading:"lazy"})," ",5*(t.rating/100).toFixed(1)," \xb7 ",s.length," reviews"]}),(0,j.jsxs)("div",{className:"rating-breakdown",children:[(0,j.jsx)("h4",{className:"cleanliness",children:"Cleanliness "}),(0,j.jsxs)("div",{className:"meter-container c-review",children:[(0,j.jsx)("meter",{max:"5",value:t.value/2}),(0,j.jsx)("span",{children:t.cleanliness/2})]}),(0,j.jsx)("h4",{className:"communication",children:"Communication "}),(0,j.jsxs)("div",{className:"meter-container communi-review",children:[(0,j.jsx)("meter",{max:"5",value:t.value/2}),(0,j.jsx)("span",{children:t.communication/2})]}),(0,j.jsx)("h4",{className:"check-in",children:"Check-in "}),(0,j.jsxs)("div",{className:"meter-container checkin-review",children:[(0,j.jsx)("meter",{max:"5",value:t.value/2}),(0,j.jsx)("span",{children:t.checkin/2})]}),(0,j.jsx)("h4",{className:"accuracy",children:"Accuracy "}),(0,j.jsxs)("div",{className:"meter-container acc-review",children:[(0,j.jsx)("meter",{max:"5",value:t.value/2}),(0,j.jsx)("span",{children:t.accuracy/2})]}),(0,j.jsx)("h4",{className:"location",children:"Location "}),(0,j.jsxs)("div",{className:"meter-container loc-review",children:[(0,j.jsx)("meter",{max:"5",value:t.value/2}),(0,j.jsx)("span",{children:t.location/2})]}),(0,j.jsx)("h4",{className:"value",children:"Value "}),(0,j.jsxs)("div",{className:"meter-container val-review",children:[(0,j.jsx)("meter",{max:"5",value:t.value/2}),(0,j.jsx)("span",{children:t.value/2})]})]})]})},I=s(9210),U=function(e){var t=e.reviewScores,s=e.reviews,n=(0,o.useState)(!1),r=(0,c.Z)(n,2),a=r[0],i=r[1];return(0,j.jsxs)("section",{className:"reviews-container",children:[(0,j.jsx)(R,{reviewScores:t,reviews:s}),(0,j.jsx)(I.x,{isReviewsExpanded:a,reviews:s}),(0,j.jsx)("div",{className:"reviews-btn",onClick:function(){i(!a)},children:(0,j.jsx)("h3",{children:a?"Show less":"Show more"})})]})},F=s(7993),O=function(e){var t=e.center;return(0,F.Ji)({id:"google-map-script",googleMapsApiKey:"AIzaSyCNv4OkuFcFX30VsoIv9bOiWVAmfON1oyM"}).isLoaded?(0,j.jsx)(F.b6,{mapContainerStyle:{border:"none",width:"100%",height:"400px"},mapContainerClassName:"map-container",center:t,zoom:12,children:(0,j.jsx)(F.Jx,{position:t})}):(0,j.jsx)(j.Fragment,{})},z=function(e){var t=e.name,s=e.reviewScores,n=e.host,r=e.reviews,a=e.address;return(0,j.jsxs)("section",{className:"stay-title-info-container",children:[(0,j.jsx)("h1",{className:"stay-name",children:t}),(0,j.jsx)("div",{className:"short-desc",children:(0,j.jsxs)("div",{className:"stats",children:[(0,j.jsxs)("span",{children:[(0,j.jsx)("img",{width:"14px",src:D.Z,alt:"",loading:"lazy"})," ",5*(s.rating/100).toFixed(1)," \xb7"]}),(0,j.jsxs)("span",{className:"reviews",children:[" ",r.length," reviews"]}),(0,j.jsx)("span",{className:"seperate-dott",children:"\xb7"}),n.isSuperhost&&(0,j.jsxs)("span",{className:"super-host",children:["Superhost",(0,j.jsx)("span",{className:"seperate-dott",children:"\xb7"})]}),(0,j.jsx)("span",{className:"address",children:a.street})]})})]})},L=(s(1549),s(197)),A=function(e){var t=e.imgUrls;return(0,j.jsxs)("section",{className:"img-layout",children:[(0,j.jsx)("div",{className:"imgs-carousel-container",children:(0,j.jsx)(L.lr,{showThumbs:!1,showArrows:!1,showStatus:!1,children:t.map((function(e){return(0,j.jsx)("img",{src:u.N.getImageUrl(e),alt:"",loading:"lazy"},e)}))})}),(0,j.jsxs)("div",{className:"stay-imgs-container",children:[(0,j.jsx)("img",{className:"main-img-container",src:u.N.getImageUrl(t[0]),alt:"",loading:"lazy"}),t.map((function(e,t){if(0===t)return null;var s=null;return 2===t&&(s={borderTopRightRadius:"12px"}),4===t&&(s={borderBottomRightRadius:"12px"}),(0,j.jsx)("img",{style:s,className:"secondary-img-container",src:u.N.getImageUrl(e),alt:"",loading:"lazy"},t)}))]})]})},T=s(3044),E=function(e){var t=e.loggedInUser,s=e.addReview,n=(0,o.useState)(""),r=(0,c.Z)(n,2),a=r[0],i=r[1];return(0,j.jsxs)("section",{className:"add-review-container",children:[(0,j.jsx)("h2",{children:"Add Review"}),t&&(0,j.jsxs)("div",{className:"loggedin-user",children:[(0,j.jsx)(T.Z,{src:t.imgUrl}),(0,j.jsx)("h3",{children:t.fullname})]}),(0,j.jsx)("textarea",{type:"text",name:"txt",autoComplete:"off",onChange:function(e){return t=e.target.value,void i(t);var t},value:a,placeholder:"Add your review..."}),(0,j.jsxs)("button",{onClick:function(){s(a),i("")},children:[" ","Send"," "]})]})},_=s(2506),G=function(){var e=(0,l.UO)(),t=(0,l.s0)(),s=(0,d.v9)((function(e){return e.userModule})).user,h=(0,o.useState)(null),m=(0,c.Z)(h,2),x=m[0],v=m[1];(0,o.useEffect)((function(){window.scrollTo(0,0),p()}),[]);var p=function(){var s=(0,i.Z)((0,a.Z)().mark((function s(){var n;return(0,a.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u.N.getById(e.stayId);case 3:n=s.sent,v(n),s.next=11;break;case 7:s.prev=7,s.t0=s.catch(0),(0,N.h4)(s.t0),t(-1);case 11:case"end":return s.stop()}}),s,null,[[0,7]])})));return function(){return s.apply(this,arguments)}}(),f=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.N.addReview(x._id,t);case 3:s=e.sent,v((0,r.Z)((0,r.Z)({},x),{},{reviews:[].concat((0,n.Z)(x.reviews),[s])})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,N.h4)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(_.t,{theme:"stay-details"}),(0,j.jsx)("main",{className:"details-layout",children:x?(0,j.jsxs)("section",{className:"stay-details-container",children:[(0,j.jsx)(z,{name:x.name,reviewScores:x.reviewScores,host:x.host,reviews:x.reviews,address:x.address}),(0,j.jsx)(A,{imgUrls:x.imgUrls}),(0,j.jsxs)("section",{className:"info-reserve",children:[(0,j.jsx)(w,{stay:x}),(0,j.jsx)(C,{stayId:x._id,price:x.price,numOfGuest:x.capacity,hostId:x.host._id,rating:x.reviewScores.rating,reviewsLength:x.reviews.length})]}),(0,j.jsx)(U,{reviewScores:x.reviewScores,reviews:x.reviews}),(0,j.jsx)(E,{loggedInUser:s,addReview:f}),x.address.location&&(0,j.jsx)(O,{center:{lng:x.address.location.lat,lat:x.address.location.lan}})]}):(0,j.jsx)("div",{})})]})}}}]);
//# sourceMappingURL=412.4957e0f8.chunk.js.map