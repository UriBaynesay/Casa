"use strict";(self.webpackChunkcasa=self.webpackChunkcasa||[]).push([[22],{4872:function(e,s,n){n(2791);s.Z=n.p+"static/media/star.523d9e205c20990b0c1b62dddc8cee4b.svg"},9210:function(e,s,n){n.d(s,{x:function(){return a}});var r=n(3504),i=n(184),t=function(e){var s=e.review,n=e.isReviewsExpanded;return(0,i.jsxs)("article",{className:"review-card",children:[(0,i.jsx)(r.rU,{to:"/user/profile/".concat(s.by._id),children:(0,i.jsxs)("div",{className:"writer-info-container",children:[(0,i.jsx)("div",{className:"writer-img-container",children:(0,i.jsx)("img",{src:s.by.imgUrl,alt:"",loading:"lazy"})}),(0,i.jsx)("h4",{children:s.by.fullname})]})}),(0,i.jsx)("p",{style:n?{height:"fit-content"}:{height:"72px"},children:s.txt})]})},a=function(e){var s=e.isReviewsExpanded,n=e.reviews;return(0,i.jsx)("div",{className:"review-cards-container",style:s?{maxHeight:"fit-content"}:null,children:n.map((function(e){return(0,i.jsx)(t,{isReviewsExpanded:s,review:e},e.by._id)}))})}},6936:function(e,s,n){n.d(s,{l:function(){return o}});var r=n(3504),i=n(2791),t=(n(1549),n(197)),a=n(4872),c=n(8312),l=n(184);function d(e){var s=e.stay,n=e.isUserStayPage,i=(s.reviewScores.rating/100*5).toFixed(2);return(0,l.jsxs)(r.rU,{to:"/stay/details/".concat(s._id),className:"stay-preview-container",children:[(0,l.jsx)("div",{className:"stay-img-container",children:(0,l.jsxs)(t.lr,{showThumbs:!1,showStatus:!1,children:[(0,l.jsx)("div",{children:(0,l.jsx)("img",{src:c.N.getImageUrl(s.imgUrls[0]),alt:"",loading:"lazy"})}),(0,l.jsx)("div",{children:(0,l.jsx)("img",{src:c.N.getImageUrl(s.imgUrls[1]),alt:"",loading:"lazy"})}),(0,l.jsx)("div",{children:(0,l.jsx)("img",{src:c.N.getImageUrl(s.imgUrls[2]),alt:"",loading:"lazy"})})]})}),(0,l.jsxs)("span",{className:"top-summary",children:[(0,l.jsxs)("span",{className:"stay-address",children:[s.address.street," "]}),(0,l.jsxs)("span",{className:"star-rating",children:[i," ",(0,l.jsx)("img",{width:"14px",src:a.Z,alt:""})]})]}),(0,l.jsx)("div",{className:"stay-quick-data",children:s.propertyType}),(0,l.jsx)("div",{className:"stay-quick-data",children:s.roomType}),(0,l.jsxs)("div",{className:"stay-price",children:[(0,l.jsxs)("span",{className:"stay-price",children:["$",s.price.toLocaleString()]})," ",(0,l.jsx)("span",{className:"stay-night",children:"night"})]}),n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.rU,{style:{display:"block"},to:"/stay/edit/".concat(s._id),onClick:function(e){return e.stopPropagation()},children:"Edit"}),(0,l.jsx)(r.rU,{style:{color:"darkred"},to:"/stay/delete/".concat(s._id),children:"Delete"})]})]})}function o(e){var s=e.stays,n=e.isUserStayPage;(0,i.useEffect)((function(){var e=document.querySelectorAll(".dot");return e.forEach((function(e){e.addEventListener("click",r)})),function(){e.forEach((function(e){e.removeEventListener("click",r)}))}}),[]);var r=function(e){e.preventDefault()};return(0,l.jsx)("div",{className:"stay-list-container",children:s.map((function(e){return(0,l.jsx)(d,{stay:e,isUserStayPage:n},e._id)}))})}},6215:function(e,s,n){n.r(s),n.d(s,{default:function(){return g}});var r=n(4165),i=n(5861),t=n(885),a=n(2791),c=n(2506),l=n(6871),d=n(5653),o=n(8312),u=n(9434),h=n(3504),x=n(184),v=function(e){var s=e.user,n=e.stays,r=(0,u.v9)((function(e){var s;return null===(s=e.userModule.user)||void 0===s?void 0:s._id})),i=n.reduce((function(e,s){return e+s.reviews.length}),0),t=0;return 0!==n.length&&(t=n.reduce((function(e,s){return e+s.reviewScores.rating}),0)/n.length),(0,x.jsxs)("section",{className:"user-info-container",children:[s&&(0,x.jsxs)("div",{className:"profile-details-container",children:[(0,x.jsx)("div",{className:"profile-image-container",children:(0,x.jsx)("img",{src:s.imgUrl,alt:"",loading:"lazy"})}),(0,x.jsx)("h3",{children:s.fullname}),r===s._id&&(0,x.jsx)(h.rU,{to:"/user/profile/edit/".concat(r),children:"Edit"})]}),(0,x.jsxs)("div",{className:"profile-hosting-stats-container",children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{children:i})," Reviews"]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{children:t/10})," Rating"]})]})]})},m=n(2982),f=n(9210),j=n(6936),p=function(e){var s=e.fullname,n=e.stays,r=(0,a.useState)(!1),i=(0,t.Z)(r,2),c=i[0],l=i[1],d=n.reduce((function(e,s){return[].concat((0,m.Z)(e),(0,m.Z)(s.reviews))}),[]);return(0,x.jsxs)("section",{className:"hosting-info-container",children:[(0,x.jsxs)("div",{className:"profile-reviews-list-container",children:[(0,x.jsxs)("h3",{children:[s," Reviews"]}),d.length?(0,x.jsxs)(a.Fragment,{children:[" ",(0,x.jsx)(f.x,{isReviewsExpanded:c,reviews:d}),(0,x.jsx)("div",{className:"reviews-btn",onClick:function(){l(!c)},children:(0,x.jsx)("h3",{children:c?"Show less":"Show more"})})]}):(0,x.jsx)("p",{children:"No Reviews"})]}),(0,x.jsxs)("div",{className:"profile-stays-list-container",children:[(0,x.jsxs)("h3",{children:[s," Stays"]}),n.length?(0,x.jsx)(j.l,{stays:n,isUserStayPage:!1}):(0,x.jsx)("p",{children:"No Stays"})]})]})},g=function(){var e=(0,l.UO)(),s=(0,a.useState)(),n=(0,t.Z)(s,2),u=n[0],h=n[1],m=(0,a.useState)([]),f=(0,t.Z)(m,2),j=f[0],g=f[1];(0,a.useEffect)((function(){y()}),[e.userId]);var y=function(){var s=(0,i.Z)((0,r.Z)().mark((function s(){var n,i;return(0,r.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,d.W.getById(e.userId);case 3:return n=s.sent,s.next=6,o.N.query({hostId:n._id});case 6:i=s.sent,h(n),g(i),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(0),console.log(s.t0);case 14:case"end":return s.stop()}}),s,null,[[0,11]])})));return function(){return s.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:"user-profile-page",children:[(0,x.jsx)(c.t,{}),(0,x.jsx)("main",{className:"user-profile main-layout",children:u&&(0,x.jsxs)("div",{className:"user-profile-container",children:[(0,x.jsx)(v,{user:u,stays:j}),(0,x.jsx)(p,{stays:j})]})})]})}}}]);
//# sourceMappingURL=22.b4049c85.chunk.js.map